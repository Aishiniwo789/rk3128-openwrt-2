# 1. 强制锁定RK3128 32位架构（核心修正）
CONFIG_TARGET_rockchip=y
CONFIG_TARGET_rockchip_armv7=y
CONFIG_TARGET_rockchip_armv7_DEVICE_rk3128_box=y
CONFIG_TARGET_BOARD="rockchip"
CONFIG_TARGET_SUBTARGET="armv7"
CONFIG_TARGET_PROFILE="DEVICE_rk3128_box"
CONFIG_TARGET_ARCH="arm"
CONFIG_TARGET_ARCH_PACKAGES="arm_cortex-a7_neon-vfpv4"
CONFIG_CPU_TYPE="cortex-a7"
CONFIG_DEFAULT_TARGET_OPTIMIZATION="-Os -pipe -march=armv7-a -mtune=cortex-a7 -mfpu=neon-vfpv4 -mfloat-abi=hard"

# 2. 禁用arm64相关配置（防止架构冲突）
CONFIG_TARGET_rockchip_armv8=n
CONFIG_ARCH_64BIT=n
CONFIG_arm64=n
CONFIG_aarch64=n

# 3. 打印服务核心配置
CONFIG_PACKAGE_cups=y
CONFIG_PACKAGE_cups-filters=y
CONFIG_PACKAGE_ipp-usb=y
CONFIG_PACKAGE_usb-printer=y
CONFIG_PACKAGE_kmod-usb-printer=y
CONFIG_PACKAGE_samba4-server=y

# 4. 基础硬件适配（RK3128盒子）
CONFIG_PACKAGE_wpad-basic-openssl=y
CONFIG_PACKAGE_kmod-usb2=y
CONFIG_PACKAGE_kmod-usb-ohci=y
CONFIG_PACKAGE_kmod-usb-storage=y
CONFIG_PACKAGE_sshd=y
CONFIG_PACKAGE_dnsmasq=y
CONFIG_PACKAGE_firewall=y

# 5. 编译优化（避免依赖冲突）
CONFIG_ALL_KMODS=n
CONFIG_DEVEL=y
CONFIG_USE_MKLIBS=y
CONFIG_STRIP_KERNEL_EXPORTS=y
CONFIG_CCACHE=y
CONFIG_EXTRA_OPTIMIZATION="-Os -fno-caller-saves"
