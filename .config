# RK3128 (ARM Cortex-A7 32位) 电视盒子专属配置 - 打印服务器版
# 核心架构：rockchip armv7 generic
CONFIG_TARGET_rockchip=y
CONFIG_TARGET_rockchip_armv7=y
CONFIG_TARGET_rockchip_armv7_DEVICE_generic=y
CONFIG_TARGET_BOARD="rockchip"
CONFIG_TARGET_SUBTARGET="armv7"
CONFIG_TARGET_PROFILE="DEVICE_generic"
CONFIG_TARGET_ARCH_PACKAGES="arm_cortex-a7_neon-vfpv4"
CONFIG_DEFAULT_TARGET_OPTIMIZATION="-Os -pipe -march=armv7-a -mtune=cortex-a7 -mfpu=neon-vfpv4 -mfloat-abi=hard"
CONFIG_TARGET_ROOTFS_SQUASHFS=y
CONFIG_TARGET_ROOTFS_EXT4FS=y

# 打印服务核心（CUPS+USB打印+网络共享）
CONFIG_PACKAGE_cups=y
CONFIG_PACKAGE_cups-filters=y
CONFIG_PACKAGE_cups-pdf=y
CONFIG_PACKAGE_ipp-usb=y
CONFIG_PACKAGE_usb-printer=y
CONFIG_PACKAGE_kmod-usb-printer=y
CONFIG_PACKAGE_samba4-server=y
CONFIG_PACKAGE_samba4-client=y

# 无线驱动（RK3128电视盒子通用，覆盖rtl/MT系列）
CONFIG_PACKAGE_wpad-basic-openssl=y
CONFIG_PACKAGE_kmod-rtl8188eu=y
CONFIG_PACKAGE_kmod-rtl8192cu=y
CONFIG_PACKAGE_kmod-mt7603e=y
CONFIG_PACKAGE_kmod-mt76x0u=y
CONFIG_PACKAGE_wireless-tools=y
CONFIG_PACKAGE_iw=y

# 硬件适配（双USB+网口+HDMI/AV，无TF卡故关闭相关）
CONFIG_PACKAGE_kmod-usb-core=y
CONFIG_PACKAGE_kmod-usb2=y
CONFIG_PACKAGE_kmod-usb-ohci=y
CONFIG_PACKAGE_kmod-usb-uhci=y
CONFIG_PACKAGE_kmod-usb-storage=y
CONFIG_PACKAGE_kmod-usb-storage-extras=y
CONFIG_PACKAGE_kmod-phy-rockchip-inno=y
CONFIG_PACKAGE_kmod-net-ethernet=y
CONFIG_PACKAGE_kmod-rockchip-dwmac=y

# 基础系统工具（调试+网络+网页串口）
CONFIG_PACKAGE_dnsmasq-full=y
CONFIG_PACKAGE_firewall=y
CONFIG_PACKAGE_opkg=y
CONFIG_PACKAGE_sshd=y
CONFIG_PACKAGE_wget=y
CONFIG_PACKAGE_htop=y
CONFIG_PACKAGE_ttyd=y
CONFIG_PACKAGE_ping=y
CONFIG_PACKAGE_traceroute=y

# 编译优化（提速+减体积，关闭所有无用功能）
CONFIG_STRIP_KERNEL_EXPORTS=y
CONFIG_USE_MKLIBS=y
CONFIG_USE_SSTRIP=y
CONFIG_ALL_KMODS=n
CONFIG_ALL=n
CONFIG_DEVEL=y
CONFIG_CCACHE=y
CONFIG_EXTRA_OPTIMIZATION="-fno-inline-small-functions"
CONFIG_KERNEL_BUILD_USER="openwrt"
CONFIG_KERNEL_BUILD_HOST="github-actions"

# 强制关闭armv8/64位相关（彻底杜绝架构混淆）
CONFIG_TARGET_rockchip_armv8=n
CONFIG_aarch64_generic=n
CONFIG_KERNEL_ARCH_ARM64=n
